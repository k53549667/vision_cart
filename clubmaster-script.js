// Clubmaster eyeglasses products data
const clubmasterProducts = [
    {
        id: 301,
        name: "Vincent Chase Polarized Classic",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 788,
        badge: "BESTSELLER",
        frameType: "half-rim",
        color: "black",
        gender: "unisex",
        material: "mixed",
        size: "wide",
        image: "https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 302,
        name: "Vincent Chase Polarized Popstar",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.8,
        reviews: 904,
        badge: "TRENDING",
        frameType: "half-rim",
        color: "brown",
        gender: "unisex",
        material: "mixed",
        size: "wide",
        image: "https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 303,
        name: "Vincent Chase Havana Classic",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 876,
        badge: "POPULAR",
        frameType: "half-rim",
        color: "havana",
        gender: "male",
        material: "mixed",
        size: "medium",
        image: "https://images.unsplash.com/photo-1577803645773-f96470509666?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 304,
        name: "John Jacobs Premium",
        brand: "John Jacobs",
        type: "Clubmaster Sunglasses",
        price: 5000,
        originalPrice: 10000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 479,
        badge: "PREMIUM",
        frameType: "half-rim",
        color: "gold",
        gender: "unisex",
        material: "metal",
        size: "wide",
        image: "https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 305,
        name: "John Jacobs Elite",
        brand: "John Jacobs",
        type: "Clubmaster Eyeglasses",
        price: 4900,
        originalPrice: 9800,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 529,
        badge: "NEW",
        frameType: "half-rim",
        color: "black",
        gender: "male",
        material: "mixed",
        size: "medium",
        image: "https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 306,
        name: "Vincent Chase Polarized Narrow",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 728,
        badge: "BESTSELLER",
        frameType: "half-rim",
        color: "black",
        gender: "unisex",
        material: "mixed",
        size: "narrow",
        image: "https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 307,
        name: "Vincent Chase Havana Medium",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 876,
        badge: "HOT",
        frameType: "half-rim",
        color: "havana",
        gender: "male",
        material: "mixed",
        size: "medium",
        image: "https://images.unsplash.com/photo-1591076482161-42ce6da69f67?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 308,
        name: "Vincent Chase Havana Narrow",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 728,
        badge: "SALE",
        frameType: "half-rim",
        color: "havana",
        gender: "unisex",
        material: "mixed",
        size: "narrow",
        image: "https://images.unsplash.com/photo-1580836021208-307460e21b2e?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 309,
        name: "Vincent Chase Reader Club Wide",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 245,
        badge: "NEW",
        frameType: "half-rim",
        color: "black",
        gender: "unisex",
        material: "mixed",
        size: "wide",
        image: "https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 310,
        name: "Vincent Chase Online Special",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 1500,
        originalPrice: 4500,
        discount: "67% OFF",
        rating: 4.9,
        reviews: 109,
        badge: "OFFER",
        frameType: "half-rim",
        color: "blue",
        gender: "unisex",
        material: "mixed",
        size: "wide",
        image: "https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 311,
        name: "Vincent Chase Reader Club Extra Wide",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 163,
        badge: "TRENDING",
        frameType: "half-rim",
        color: "brown",
        gender: "male",
        material: "mixed",
        size: "extra-wide",
        image: "https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 312,
        name: "Vincent Chase Polarized Medium",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.8,
        reviews: 149,
        badge: "POPULAR",
        frameType: "half-rim",
        color: "black",
        gender: "unisex",
        material: "mixed",
        size: "medium",
        image: "https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 313,
        name: "Vincent Chase Metal Classics",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 85,
        badge: "NEW",
        frameType: "half-rim",
        color: "gold",
        gender: "male",
        material: "metal",
        size: "narrow",
        image: "https://images.unsplash.com/photo-1577803645773-f96470509666?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 314,
        name: "Vincent Chase Polarized Mini",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 106,
        badge: "BESTSELLER",
        frameType: "half-rim",
        color: "black",
        gender: "unisex",
        material: "mixed",
        size: "narrow",
        image: "https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400&h=400&fit=crop&q=80"
    },
    {
        id: 315,
        name: "Vincent Chase Metal Classics Silver",
        brand: "Vincent Chase",
        type: "Clubmaster Sunglasses",
        price: 2000,
        originalPrice: 4000,
        discount: "50% OFF",
        rating: 4.9,
        reviews: 85,
        badge: "HOT",
        frameType: "half-rim",
        color: "silver",
        gender: "unisex",
        material: "metal",
        size: "narrow",
        image: "https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=400&h=400&fit=crop&q=80"
    }
];

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadClubmasterProducts();
    setupClubmasterFilters();
    setupClubmasterSort();
    setupClubmasterSearch();
});

// Load products into grid
function loadClubmasterProducts(productsToShow = clubmasterProducts) {
    const productGrid = document.getElementById('clubmasterProductGrid');
    
    if (!productGrid) {
        return;
    }
    
    productGrid.innerHTML = '';
    
    productsToShow.forEach(product => {
        const productCard = createClubmasterProductCard(product);
        productGrid.appendChild(productCard);
    });
    
    updateClubmasterProductCount(productsToShow.length);
}

// Create product card
function createClubmasterProductCard(product) {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.setAttribute('data-product-id', product.id);
    card.style.cursor = 'pointer';
    
    card.innerHTML = `
        <a href="product-detail.php?id=${product.id}" class="product-link">
            <div class="product-image">
                <img src="${product.image}" alt="${product.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="eyeglass-img" style="display: none;">
                    <div class="eyeglass">
                        <div class="lens wayfarer ${product.color}-frame"></div>
                        <div class="bridge"></div>
                        <div class="lens wayfarer ${product.color}-frame"></div>
                        <div class="temple left"></div>
                        <div class="temple right"></div>
                    </div>
                </div>
                <span class="product-badge">${product.badge}</span>
            </div>
            <div class="product-info">
                <h3 class="product-name">${product.name}</h3>
                <p class="product-type">${product.brand} ‚Ä¢ Size: ${product.size.charAt(0).toUpperCase() + product.size.slice(1).replace('-', ' ')}</p>
                <div class="product-rating">
                    <span class="stars">${generateStars(product.rating)}</span>
                    <span class="rating-count">${product.rating} <i class="fas fa-star" style="font-size: 11px; margin: 0 2px;"></i> (${product.reviews})</span>
                </div>
                <div class="product-price">
                    <span class="current-price">‚Çπ${product.price}</span>
                    <span class="original-price">‚Çπ${product.originalPrice}</span>
                </div>
                <div class="discount" style="color: var(--accent-color); font-weight: 600; margin-bottom: 10px;">${product.discount}</div>
                <p style="font-size: 13px; color: var(--dark-gray); margin-bottom: 12px;">Buy 1 Get 1 Free with Gold Membership</p>
            </div>
        </a>
        <div class="product-actions">
            <button class="add-to-cart" onclick="event.stopPropagation(); addToCart(${product.id})">
                <i class="fas fa-shopping-cart"></i> Add to Cart
            </button>
            <button class="wishlist-btn" onclick="event.stopPropagation(); addToWishlist(${product.id})">
                <i class="fas fa-heart"></i>
            </button>
        </div>
    `;
    
    return card;
}

// Generate stars
function generateStars(rating) {
    let stars = '';
    const fullStars = Math.floor(rating);
    const hasHalfStar = rating % 1 !== 0;
    
    for (let i = 0; i < fullStars; i++) {
        stars += '<i class="fas fa-star"></i>';
    }
    
    if (hasHalfStar) {
        stars += '<i class="fas fa-star-half-alt"></i>';
    }
    
    const emptyStars = 5 - Math.ceil(rating);
    for (let i = 0; i < emptyStars; i++) {
        stars += '<i class="far fa-star"></i>';
    }
    
    return stars;
}

// Setup filters
function setupClubmasterFilters() {
    const filterCheckboxes = document.querySelectorAll('.filter-options input[type="checkbox"]');
    
    filterCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', applyClubmasterFilters);
    });
    
    const clearButton = document.querySelector('.clear-filters');
    if (clearButton) {
        clearButton.addEventListener('click', clearClubmasterFilters);
    }
}

// Apply filters
function applyClubmasterFilters() {
    const selectedFilters = {
        frameType: [],
        size: [],
        color: [],
        brand: [],
        price: [],
        gender: [],
        material: []
    };
    
    document.querySelectorAll('.filter-options input[type="checkbox"]:checked').forEach(checkbox => {
        const filterType = checkbox.name;
        const filterValue = checkbox.value;
        if (selectedFilters[filterType]) {
            selectedFilters[filterType].push(filterValue);
        }
    });
    
    let filteredProducts = clubmasterProducts.filter(product => {
        if (selectedFilters.frameType.length > 0 && !selectedFilters.frameType.includes(product.frameType)) {
            return false;
        }
        
        if (selectedFilters.size.length > 0 && !selectedFilters.size.includes(product.size)) {
            return false;
        }
        
        if (selectedFilters.color.length > 0 && !selectedFilters.color.includes(product.color)) {
            return false;
        }
        
        if (selectedFilters.brand.length > 0) {
            const brandMatch = selectedFilters.brand.some(brand => 
                product.brand.toLowerCase().includes(brand.replace('-', ' '))
            );
            if (!brandMatch) return false;
        }
        
        if (selectedFilters.price.length > 0) {
            const priceMatch = selectedFilters.price.some(range => {
                if (range === '0-2000') return product.price < 2000;
                if (range === '2000-3000') return product.price >= 2000 && product.price < 3000;
                if (range === '3000-5000') return product.price >= 3000 && product.price < 5000;
                if (range === '5000+') return product.price >= 5000;
                return false;
            });
            if (!priceMatch) return false;
        }
        
        if (selectedFilters.gender.length > 0 && !selectedFilters.gender.includes(product.gender)) {
            return false;
        }
        
        if (selectedFilters.material.length > 0 && !selectedFilters.material.includes(product.material)) {
            return false;
        }
        
        return true;
    });
    
    loadClubmasterProducts(filteredProducts);
}

// Clear all filters
function clearClubmasterFilters() {
    document.querySelectorAll('.filter-options input[type="checkbox"]').forEach(checkbox => {
        checkbox.checked = false;
    });
    loadClubmasterProducts(clubmasterProducts);
}

// Setup sort
function setupClubmasterSort() {
    const sortSelect = document.getElementById('sortSelect');
    if (sortSelect) {
        sortSelect.addEventListener('change', function() {
            sortClubmasterProducts(this.value);
        });
    }
}

// Sort products
function sortClubmasterProducts(sortBy) {
    let sortedProducts = [...clubmasterProducts];
    
    switch(sortBy) {
        case 'price-low':
            sortedProducts.sort((a, b) => a.price - b.price);
            break;
        case 'price-high':
            sortedProducts.sort((a, b) => b.price - a.price);
            break;
        case 'rating':
            sortedProducts.sort((a, b) => b.rating - a.rating);
            break;
        case 'newest':
            sortedProducts.reverse();
            break;
        default:
            sortedProducts.sort((a, b) => b.reviews - a.reviews);
    }
    
    loadClubmasterProducts(sortedProducts);
}

// Setup search
function setupClubmasterSearch() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            searchClubmasterProducts(this.value);
        });
    }
}

// Search products
function searchClubmasterProducts(searchTerm) {
    const filtered = clubmasterProducts.filter(product => {
        const searchLower = searchTerm.toLowerCase();
        return product.name.toLowerCase().includes(searchLower) ||
               product.brand.toLowerCase().includes(searchLower) ||
               product.type.toLowerCase().includes(searchLower);
    });
    
    loadClubmasterProducts(filtered);
}

// Update product count
function updateClubmasterProductCount(count) {
    const productCountElement = document.getElementById('productCount');
    if (productCountElement) {
        productCountElement.textContent = count;
    }
}

// Load more button
const loadMoreBtn = document.querySelector('.load-more button');
if (loadMoreBtn) {
    loadMoreBtn.addEventListener('click', function() {
        showNotification('More products loaded!', 'success');
    });
}

console.log('Clubmaster Eyeglasses page loaded with ' + clubmasterProducts.length + ' products! üï∂Ô∏è');
